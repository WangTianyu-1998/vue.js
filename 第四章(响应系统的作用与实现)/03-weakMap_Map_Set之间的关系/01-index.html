<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Document</title>
    <style></style>
  </head>
  <body>
    123
    <script type="module">
      /**
       * Map å’Œ WeakMap çš„åŒºåˆ«
       * 1. Map å¯ä»¥ä½¿ç”¨ä»»æ„ç±»åž‹çš„å€¼ä½œä¸ºé”®ï¼ŒWeakMap åªèƒ½ä½¿ç”¨å¯¹è±¡ä½œä¸ºé”®
       * 2. Map ä¼šè®°ä½æ‰€æœ‰çš„é”®ï¼Œä¸ä¼šè¢«åžƒåœ¾å›žæ”¶æœºåˆ¶å›žæ”¶ï¼ŒWeakMap çš„é”®æ˜¯å¼±å¼•ç”¨ï¼Œä¼šè¢«åžƒåœ¾å›žæ”¶æœºåˆ¶å›žæ”¶
       * 3. æ‰€ä»¥ è¿™é‡Œæ‰“å° mapæ˜¯æœ‰å€¼çš„,ä½†æ˜¯weakmapæ˜¯ç©ºçš„, æ‰€ä»¥Mapå¯èƒ½ä¼šå¯¼è‡´å†…å­˜æ³„æ¼
       */
      // const map = new Map()
      // const weakmap = new WeakMap()

      // const obj = { a: 1 }
      // map.set(obj, 1)
      // map.set(2, 1)

      // weakmap.set(obj, 5)

      // console.log({
      //   map,
      //   weakmap,
      // })

      // ;(function () {
      //   const foo = { foo: 1 }
      //   const bar = { bar: 2 }
      //   map.set(foo, 1)
      //   weakmap.set(bar, 2)
      // })()

      // console.log({
      //   map,
      //   weakmap,
      // })

      // let depsMap
      const effect1 = () => {
        console.log("effect1")
      }

      let target = { text: "hello" }
      const bucket = new Map()
      let depsMap
      bucket.set(target, (depsMap = new Map()))
      let deps
      depsMap.set("text", (deps = new Set()))
      // deps.add(effect1)
      // console.log("ðŸš€ ~ depsMap:", depsMap)
      console.log("ðŸš€ ~ bucket:", bucket)
    </script>
  </body>
</html>
